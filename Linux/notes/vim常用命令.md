# VIM 常用命令

* 终端 `$ vim + filename / vim` 可以进入 **命令模式**  
* **命令模式** 按 **a/i/o** 进入 **插入模式**
* **插入模式** 按 exe 退回到 **命令模式** 
* **命令模式** 按 **:** 可以进入**编辑模式**

## 插入命令

在命令模式下

* `a` 在光标所在字符后插入
* `A` 在光标所在行尾插入
* `i` 在光标所在字符前插入
* `I` 在光标所在行行首插入
* `o` 在光标下方插入新行
* `O` 在光标上方插入新行

## 定位命令

在命令模式下

* `:set nu` 设置行号
* `:set nonu` 取消行号
* `gg` 到第一行
* `G` 到最后一行
* `nG` 到第n行
* `:n` 到第n行
* `$/home` 移动到行尾
* `0/end` 移动到行首

## 删除命令

在命令模式下

* `x` 删除光标所在字符
* `nx` 删除光标所在处后n个字符
* `dd` 删除光标所在行
* `ndd` 删除n行
* `dG` 删除光标所在处到文件末尾的内容
* `D` 删除光标所在处到行尾的内容
* `:n1,n2d` 删除指定范围的行 ， eg 删除 8 - 10 行的内容 `:8,10d` 这里的d不要漏了

## 剪切和复制命令

在命令模式下

* `yy` 复制当前行
* `nyy` 赋值当前行以下n行
* `dd` 剪切当前行
* `dw` 剪切当前单词
* `ndd` 剪切当前行一下n行
* `p` 粘贴在当前光标所在行行下
* `P` 粘贴在当前光标所在行行上

## 替换和取消操作

在命令模式下

* `r` 取代光标所在处字符
* `R` 替换模式，从光标所在处开始替换字符，直到按 exc结束
* `u` 取消上一步操作
* `ctrl+r` 重做操作

## 搜索和搜索替换命令

在命令模式下

* `/string` 搜索指定字符串（严格区分大小写 ） 如果像不区分大小写 用命令 `:set ic` ，如果区分大小写`:set noic` 
* `n` 搜索指定字符串下一个出现的位置
* `N` 搜索指定字符串上一个出现的位置
* `:%s/old/new/g` 全文替换为指定的字符串，g表示替换的时候不询问，c表示替换的时候询问
* `:n1,n2s/old/new/g` 在一定范围内（行n1-n2)替换为指定的字符串。 （s可以理解成search的简写）

## 保存和推出

在命令模式下

* `:w` 保存修改
* `:w new_filename` 另存为指定文件
* `:wq` 保存修改并推出
* `ZZ` 快捷键保存修改并推出
* `:q!` 不保存修改推出
* `:wq!` 保存修改并退出（文件所有者以及 root 可用）

## 常用技巧

命令模式下

* `:!命令` 可以在不退出vim 的情况下执行系统命令
* `:r 文件名` 可以将文件内容导入当前文本
* `:r !命令` 可以把一个命令的执行结果导入到当前的文件中， 比如`:r !data` 将当前日期导入文件
* `:map 快捷键 触发命令` 可以定义快捷键  eg: 快速注释 `:map P I#<ESC>` P的快捷操作就是 I#exc
* 连续行注释 `:n1,n2s/^/#/g` 这里的 ^是正则表达式的规则
* 取消连续行注释 `:n1,n2s/^#//g` ^# 表示找到开头的 #
* `ab maymail 175....` 在文本里的 mymail 都会被替换为 175.....
* vim 可以将这些快捷键的设置写入配置文件里 普通用户 `/home/username/.vimrc` , root 用户 `/root/.vimrc`